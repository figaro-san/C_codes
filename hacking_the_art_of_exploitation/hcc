#!/bin/sh

is_randomize=$(sudo sysctl -a | grep randomize | awk '{print $3}')
if [ $is_randomize != 0 ]; then
	echo Detect: randomize is on
	echo Set: kernel.randomize_va_space=0
	sudo sysctl -w kernel.randomize_va_space=0
fi

source_code=$1
gcc -o $(echo $source_code | tr -d '.c') $source_code -g -fno-stack-protector

echo Do not forget to set \"kernel.randomize_va_space=2\"
